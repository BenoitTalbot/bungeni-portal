<?xml version="1.0"?>
<workflow
   id="response-workflow"
   title="Response Workflow"
   description="Response to a question"
   initial_state="">

  <state id="draft response" title="a draft response">
    <grant permission="bungeni.response.edit" role="bungeni.Owner" />
    <grant permission="bungeni.response.view" role="bungeni.Owner" />    
    <grant permission="bungeni.response.delete" role="bungeni.Owner" />    
  </state>

  <state id="response submitted" title="response submitted">
    <grant permission="bungeni.response.edit" role="bungeni.Clerk"/>
    <grant permission="bungeni.response.view" role="bungeni.Clerk"/>    
    <deny permission="bungeni.response.edit" role="bungeni.Owner"/>
    <deny permission="bungeni.response.delete" role="bungeni.Owner" />
  </state>

  <state id="response complete" title="response completed">
    <deny permission="bungeni.response.edit" role="bungeni.Clerk" />
    <grant permission="bungeni.response.view" role="bungeni.Everybody" />
  </state>

  <transition 
     id="create"
     title="Create"
     trigger="automatic"
     source=""
     destination="draft response"
     action="bungeni.core.workflows.responseactions.create"
     />

  <transition 
     id="submit"
     title="Submit Response"
     trigger="manual"
     source="draft response"
     destination="response submitted"
     permission="bungeni.response.Submit" 
     action="bungeni.core.workflows.responseactions.submit"
     event="bungeni.core.workflows.interfaces.IResponseSubmittedEvent"
     />

  <transition 
     id="complete"
     title="Complete Response"
     trigger="manual"
     source="response submitted"
     destination="response complete"
     permission="bungeni.response.Complete" 
     action="bungeni.core.workflows.responseactions.complete"
     event="bungeni.core.workflows.interfaces.IResponseCompletedEvent"     
     />
     
   

</workflow>


   
   
       
       
