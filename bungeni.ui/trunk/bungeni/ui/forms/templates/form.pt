<html xmlns:tal="http://xml.zope.org/namespaces/tal"
       xmlns:metal="http://xml.zope.org/namespaces/metal"
       metal:use-macro="context/@@standard_macros/page">
<body>

<div metal:fill-slot="body">



<metal:block define-macro="form"
             i18n:domain="alchemist">
             
  <form action="."
        tal:attributes="action view/action_url|request/URL"
	method="post"
	enctype="multipart/form-data">

    
        <dl class="portalMessage info"                                                                                                              
            tal:condition="view/status"
            tal:define="mtype string:info"
            tal:attributes="class string:portalMessage ${mtype};">                                                                                  
            <dt tal:content="python:mtype.capitalize()"                                                                                             
                i18n:translate="">                                                                                                                  
                Info                                                                                                                                
            </dt>                                                                                                                                   
            <dd tal:content="view/status | nothing"                                                                                             
                i18n:translate="">                                                                                                                  
                The status message.                                                                                                                 
            </dd>                                                                                                                                   
        </dl>        
        
        <input type="hidden" name="came_from"
               tal:condition="view/came_from|nothing"
               tal:attributes="value view/came_from" />
        
    <div class="invariant-errors" tal:condition="view/invariantErrors|nothing">
        <ul>
            <li tal:repeat="error view/invariantErrors" tal:content="error/message">
            </li>
        </ul>
    </div>
          
  
<metal:block define-macro="form-body">

  <metal:block define-slot="pre-fieldset">
  </metal:block>

  <fieldset tal:define="widgets view/widgets">

    <legend tal:define="form_name view/form_name|nothing"
            tal:condition="form_name"
            tal:content="form_name"
            i18n:translate="">
      Form name
    </legend>

  <metal:block define-macro="fieldset"> 
  
    <metal:block define-slot="top-fieldset">
    </metal:block>
  <table>
  <tal:block tal:repeat="widget widgets">

    <!--div tal:condition="python: not widget.visible">
      <div class="error" tal:condition="widget/error" tal:content="widget/error"></div>
      <div tal:content="structure widget"></div>
    </div-->
      
    <tr class="field"
	 tal:condition="widget/visible"
         tal:define="description widget/hint;
                     error widget/error;
                     odd repeat/widget/odd;
                     changed widget/changed | nothing"
         tal:attributes="class python:'field'+(error and ' error' or '') + (odd and ' odd' or ' even');
                         id python: 'widget-'+widget.name.replace('_', '-')">
         <td>
          <label tal:attributes="for widget/name">
            <span i18n:translate=""
                  tal:content="widget/label">label</span>
          </label>
          <span class="fieldRequired" title="Required" tal:condition="widget/required"
                i18n:domain="plone"
                i18n:translate="label_required"
                i18n:attributes="title title_required;">
            (Required)
          </span>
         
          <div class="formHelp"
               i18n:translate=""
               tal:content="description"
               tal:condition="description"
               >field description</div>
          </td>
          <td>
          <div tal:attributes="class python:'widget'+(error and ' error' or '') + (changed and ' changed' or '')">
          <div class="widget" tal:content="structure widget"  >
            <input type="text" />
	      </div>
	      <div tal:condition="error" tal:content="structure error" tal:attributes="class python:'errormessage' + (changed and ' changed' or '')">               
            The Error
          </div>                    
	      </div>	      
	  </td>
    </tr>
   </tal:block>
   </table>
  </metal:block>
  </fieldset>
</metal:block>
   <div id="actionsView">
    <span class="actionButtons"
          tal:condition="view/availableActions">
      <tal:loop tal:repeat="action view/actions">
		<input type="submit" class="context"
			   id="" name="" value=""
			   tal:attributes="id action/__name__;
			   				   name action/__name__;
			   				   value python:str(action.label);"
			   i18n:attributes="value" />
	  </tal:loop>						
    </span>
   </div>   
  </form>
</metal:block>

</div>
</body>
</html>
